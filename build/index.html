<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>holdem</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body>
    <div class="container">
      <div class="title">Your Hand 
        <div id="hero-results" class="hero-results"></div>        
      </div>
      <div class="contents">
        <select data-value="0" autocomplete="off">
          <option value="0" selected="true">Aâ™ </option>
          <option value="48" disabled="true">2â™ </option>
          <option value="44">3â™ </option>
          <option value="40">4â™ </option>
          <option value="36">5â™ </option>
          <option value="32">6â™ </option>
        </select>

        <select data-value="1" autocomplete="off">
          <option value="0" disabled="true">Aâ™ </option>
          <option value="48" selected="true">2â™ </option>
          <option value="44">3â™ </option>
          <option value="40">4â™ </option>
          <option value="36">5â™ </option>
        </select>
      </div>
    </div>

    <div class="container">
      <div class="title">Community Cards</div>
      <div class="contents">
        <select data-value="2" autocomplete="off">
          <option value="255">ðŸ‚ </option>
          <option value="0" disabled="true">Aâ™ </option>
          <option value="48" disabled="true">2â™ </option>
          <option value="44">3â™ </option>
          <option value="40">4â™ </option>
        </select>

        <select data-value="3" autocomplete="off">
          <option value="255">ðŸ‚ </option>
          <option value="0" disabled="true">Aâ™ </option>
          <option value="48" disabled="true">2â™ </option>
        </select>

        <select data-value="4" autocomplete="off">
          <option value="255">ðŸ‚ </option>
          <option value="0" disabled="true">Aâ™ </option>
          <option value="48" disabled="true">2â™ </option>
          <option value="44">3â™ </option>
          <option value="40">4â™ </option>

        </select>

        <select data-value="5" autocomplete="off">
          <option value="255" selected="true">ðŸ‚ </option>
          <option value="0" disabled="true">Aâ™ </option>
          <option value="48" disabled="true">2â™ </option>
          <option value="44">3â™ </option>
        </select>

        <select data-value="6" autocomplete="off">
          <option value="255" selected="true">ðŸ‚ </option>
          <option value="0" disabled="true">Aâ™ </option>

        </select>
      </div>
    </div>


    <div class="container">
      <div class="title">Opponent Range <div><button id="clear-range">Clear</button></div></div>
      <div class="contents">
          <table id="villian-range" class="range-table">
            <tbody>
              <tr>
                <td data-value="0" class="pair">AA</td>
                <td data-value="1" class="suited">AKs</td>
                <td data-value="2" class="suited">AQs</td>
                <td data-value="3" class="suited">AJs</td>
                <td data-value="4" class="suited">ATs</td>
                <td data-value="5" class="suited">A9s</td>
                <td data-value="6" class="suited">A8s</td>
                <td data-value="7" class="suited">A7s</td>
                <td data-value="8" class="suited">A6s</td>
                <td data-value="9" class="suited">A5s</td>
                <td data-value="10" class="suited">A4s</td>
                <td data-value="11" class="suited">A3s</td>
                <td data-value="12" class="suited">A2s</td>
              </tr>
              <tr>
                <td data-value="13" class="offsuit">AKo</td>
                <td data-value="14" class="pair">KK</td>
                <td data-value="15" class="suited">KQs</td>
                <td data-value="16" class="suited">KJs</td>
                <td data-value="17" class="suited">KTs</td>
                <td data-value="18" class="suited">K9s</td>
                <td data-value="19" class="suited">K8s</td>
                <td data-value="20" class="suited">K7s</td>
                <td data-value="21" class="suited">K6s</td>
                <td data-value="22" class="suited">K5s</td>
                <td data-value="23" class="suited">K4s</td>
                <td data-value="24" class="suited">K3s</td>
                <td data-value="25" class="suited">K2s</td>
              </tr>
              <tr>
                <td data-value="26" class="offsuit">AQo</td>
                <td data-value="27" class="offsuit">KQo</td>
                <td data-value="28" class="pair">QQ</td>
                <td data-value="29" class="suited">QJs</td>
                <td data-value="30" class="suited">QTs</td>
                <td data-value="31" class="suited">Q9s</td>
                <td data-value="32" class="suited">Q8s</td>
                <td data-value="33" class="suited">Q7s</td>
                <td data-value="34" class="suited">Q6s</td>
                <td data-value="35" class="suited">Q5s</td>
                <td data-value="36" class="suited">Q4s</td>
                <td data-value="37" class="suited">Q3s</td>
                <td data-value="38" class="suited">Q2s</td>
              </tr>
              <tr>
                <td data-value="39" class="offsuit">AJo</td>
                <td data-value="40" class="offsuit">KJo</td>
                <td data-value="41" class="offsuit">QJo</td>
                <td data-value="42" class="pair">JJ</td>
                <td data-value="43" class="suited">JTs</td>
                <td data-value="44" class="suited">J9s</td>
                <td data-value="45" class="suited">J8s</td>
                <td data-value="46" class="suited">J7s</td>
                <td data-value="47" class="suited">J6s</td>
                <td data-value="48" class="suited">J5s</td>
                <td data-value="49" class="suited">J4s</td>
                <td data-value="50" class="suited">J3s</td>
                <td data-value="51" class="suited">J2s</td>
              </tr>
              <tr>
                <td data-value="52" class="offsuit">ATo</td>
                <td data-value="53" class="offsuit">KTo</td>
                <td data-value="54" class="offsuit">QTo</td>
                <td data-value="55" class="offsuit">JTo</td>
                <td data-value="56" class="pair">TT</td>
                <td data-value="57" class="suited">T9s</td>
                <td data-value="58" class="suited">T8s</td>
                <td data-value="59" class="suited">T7s</td>
                <td data-value="60" class="suited">T6s</td>
                <td data-value="61" class="suited">T5s</td>
                <td data-value="62" class="suited">T4s</td>
                <td data-value="63" class="suited">T3s</td>
                <td data-value="64" class="suited">T2s</td>
              </tr>
              <tr>
                <td data-value="65" class="offsuit">A9o</td>
                <td data-value="66" class="offsuit">K9o</td>
                <td data-value="67" class="offsuit">Q9o</td>
                <td data-value="68" class="offsuit">J9o</td>
                <td data-value="69" class="offsuit">T9o</td>
                <td data-value="70" class="pair">99</td>
                <td data-value="71" class="suited">98s</td>
                <td data-value="72" class="suited">97s</td>
                <td data-value="73" class="suited">96s</td>
                <td data-value="74" class="suited">95s</td>
                <td data-value="75" class="suited">94s</td>
                <td data-value="76" class="suited">93s</td>
                <td data-value="77" class="suited">92s</td>
              </tr>
              <tr>
                <td data-value="78" class="offsuit">A8o</td>
                <td data-value="79" class="offsuit">K8o</td>
                <td data-value="80" class="offsuit">Q8o</td>
                <td data-value="81" class="offsuit">J8o</td>
                <td data-value="82" class="offsuit">T8o</td>
                <td data-value="83" class="offsuit">98o</td>
                <td data-value="84" class="pair">88</td>
                <td data-value="85" class="suited">87s</td>
                <td data-value="86" class="suited">86s</td>
                <td data-value="87" class="suited">85s</td>
                <td data-value="88" class="suited">84s</td>
                <td data-value="89" class="suited">83s</td>
                <td data-value="90" class="suited">82s</td>
              </tr>
              <tr>
                <td data-value="91" class="offsuit">A7o</td>
                <td data-value="92" class="offsuit">K7o</td>
                <td data-value="93" class="offsuit">Q7o</td>
                <td data-value="94" class="offsuit">J7o</td>
                <td data-value="95" class="offsuit">T7o</td>
                <td data-value="96" class="offsuit">97o</td>
                <td data-value="97" class="offsuit">87o</td>
                <td data-value="98" class="pair">77</td>
                <td data-value="99" class="suited">76s</td>
                <td data-value="100" class="suited">75s</td>
                <td data-value="101" class="suited">74s</td>
                <td data-value="102" class="suited">73s</td>
                <td data-value="103" class="suited">72s</td>
              </tr>
              <tr>
                <td data-value="104" class="offsuit">A6o</td>
                <td data-value="105" class="offsuit">K6o</td>
                <td data-value="106" class="offsuit">Q6o</td>
                <td data-value="107" class="offsuit">J6o</td>
                <td data-value="108" class="offsuit">T6o</td>
                <td data-value="109" class="offsuit">96o</td>
                <td data-value="110" class="offsuit">86o</td>
                <td data-value="111" class="offsuit">76o</td>
                <td data-value="112" class="pair">66</td>
                <td data-value="113" class="suited">65s</td>
                <td data-value="114" class="suited">64s</td>
                <td data-value="115" class="suited">63s</td>
                <td data-value="116" class="suited">62s</td>
              </tr>
              <tr>
                <td data-value="117" class="offsuit">A5o</td>
                <td data-value="118" class="offsuit">K5o</td>
                <td data-value="119" class="offsuit">Q5o</td>
                <td data-value="120" class="offsuit">J5o</td>
                <td data-value="121" class="offsuit">T5o</td>
                <td data-value="122" class="offsuit">95o</td>
                <td data-value="123" class="offsuit">85o</td>
                <td data-value="124" class="offsuit">75o</td>
                <td data-value="125" class="offsuit">65o</td>
                <td data-value="126" class="pair">55</td>
                <td data-value="127" class="suited">54s</td>
                <td data-value="128" class="suited">53s</td>
                <td data-value="129" class="suited">52s</td>
              </tr>
              <tr>
                <td data-value="130" class="offsuit">A4o</td>
                <td data-value="131" class="offsuit">K4o</td>
                <td data-value="132" class="offsuit">Q4o</td>
                <td data-value="133" class="offsuit">J4o</td>
                <td data-value="134" class="offsuit">T4o</td>
                <td data-value="135" class="offsuit">94o</td>
                <td data-value="136" class="offsuit">84o</td>
                <td data-value="137" class="offsuit">74o</td>
                <td data-value="138" class="offsuit">64o</td>
                <td data-value="139" class="offsuit">54o</td>
                <td data-value="140" class="pair">44</td>
                <td data-value="141" class="suited">43s</td>
                <td data-value="142" class="suited">42s</td>
              </tr>
              <tr>
                <td data-value="143" class="offsuit">A3o</td>
                <td data-value="144" class="offsuit">K3o</td>
                <td data-value="145" class="offsuit">Q3o</td>
                <td data-value="146" class="offsuit">J3o</td>
                <td data-value="147" class="offsuit">T3o</td>
                <td data-value="148" class="offsuit">93o</td>
                <td data-value="149" class="offsuit">83o</td>
                <td data-value="150" class="offsuit">73o</td>
                <td data-value="151" class="offsuit">63o</td>
                <td data-value="152" class="offsuit">53o</td>
                <td data-value="153" class="offsuit">43o</td>
                <td data-value="154" class="pair">33</td>
                <td data-value="155" class="suited">32s</td>
              </tr>
              <tr>
                <td data-value="156" class="offsuit">A2o</td>
                <td data-value="157" class="offsuit">K2o</td>
                <td data-value="158" class="offsuit">Q2o</td>
                <td data-value="159" class="offsuit">J2o</td>
                <td data-value="160" class="offsuit">T2o</td>
                <td data-value="161" class="offsuit">92o</td>
                <td data-value="162" class="offsuit">82o</td>
                <td data-value="163" class="offsuit">72o</td>
                <td data-value="164" class="offsuit">62o</td>
                <td data-value="165" class="offsuit">52o</td>
                <td data-value="166" class="offsuit">42o</td>
                <td data-value="167" class="offsuit">32o</td>
                <td data-value="168" class="pair">22</td>
              </tr>
            </tbody>
          </table>


      </div>
    </div>

    <button>Simulate</button>

 <script type="text/javascript">

const combos = [
  [ [0,1], [0,2], [0,3], [1,2], [1,3], [2,3] ],
  [ [0,4], [1,5], [2,6], [3,7] ],
  [ [0,8], [1,8], [10,2], [11,3] ],
  [ [0,12], [1,13], [14,2], [15,3] ],
  [ [0,16], [1,17], [18,2], [19,3] ],
  [ [0,20], [1,21], [2,22], [23,3] ],
  [ [0,24], [1,25], [2,26], [27,3] ],
  [ [0,28], [1,29], [2,30], [3,31] ],
  [ [0,32], [1,33], [2,34], [3,35] ],
  [ [0,36], [1,37], [2,38], [3,39] ],
  [ [0,40], [1,41], [2,42], [3,43] ],
  [ [0,44], [1,45], [2,46], [3,47] ],
  [ [0,48], [1,49], [2,50], [3,51] ],

  [ [0,5], [0,6], [0,7], [1,4], [1,6], [1,7], [2,4], [2,5], [2,7], [3,4], [3,5], [3,6] ],
  [ [4,5], [4,6], [4,7], [5,6], [5,7], [6,7] ],
  [ [4,8], [5,8], [10,6], [11,7] ],
  [ [12,4], [13,5], [14,6], [15,7] ],
  [ [16,4], [17,5], [18,6], [19,7] ],
  [ [20,4], [21,5], [22,6], [23,7] ],
  [ [24,4], [25,5], [26,6], [27,7] ],
  [ [28,4], [29,5], [30,6], [31,7] ],
  [ [32,4], [33,5], [34,6], [35,7] ],
  [ [36,4], [37,5], [38,6], [39,7] ],
  [ [4,40], [41,5], [42,6], [43,7] ],
  [ [4,44], [45,5], [46,6], [47,7] ],
  [ [4,48], [49,5], [50,6], [51,7] ],

  [ [0,9], [0,10], [0,11], [1,9], [1,10], [1,11], [2,8], [2,9], [11,2], [3,8], [3,9], [10,3] ],
  [ [4,9], [10,4], [11,4], [5,9], [10,5], [11,5], [6,8], [6,9], [11,6], [7,8], [7,9], [10,7] ],
  [ [8,9], [8,10], [8,11], [9,10], [9,11], [10,11] ],
  [ [12,8], [13,8], [10,14], [11,15] ],
  [ [16,8], [17,8], [10,18], [11,19] ],
  [ [20,8], [21,8], [10,22], [11,23] ],
  [ [24,8], [25,8], [10,26], [11,27] ],
  [ [28,8], [29,8], [10,30], [11,31] ],
  [ [32,8], [33,8], [10,34], [11,35] ],
  [ [36,8], [37,8], [10,38], [11,39] ],
  [ [40,8], [41,8], [10,42], [11,43] ],
  [ [44,8], [45,8], [10,46], [11,47] ],
  [ [48,8], [49,8], [10,50], [11,51] ]
];








    //const worker = new Worker('worker.js');
document.addEventListener("DOMContentLoaded", () => {

  const selectedCards = [0,48,8,28,35,255,255];
  const villianRange = new Uint8Array(169);

  document.body.addEventListener("change", (event = {}) => {
    if (!event.target) return;
    const name = +event.target.name;
    if (selectedCards[name] === undefined) return;

    const value = +event.target.value;
    const prev = selectedCards[name];
    selectedCards[name] = value;

    selectedCards.forEach((e, i) => {
      if (name === i) {
        updateOptions(i, value, prev, true);
      } else {
        updateOptions(i, value, prev);
      }
    });

  });

  document.getElementById("villian-range").addEventListener("click", (event = {}) => {
    if (!event.target || !event.target.getAttribute('data-value')) return;
    const value = +event.target.getAttribute('data-value');


    // Toggle the cell
    villianRange[value] = !villianRange[value];

  });

  document.getElementById("simulate").addEventListener("click", (event = {}) => {
    const hero = new Uint8Array([selectedCards[0], selectedCards[1]]);
    const board = Uint8Array.from(selectedCards.slice(2));
    const boardSize = board.reduce((count, value) =>{
      if (value !== 255) count+=1
      return count;
    }, 0)

    // Take all the 1's from the villian range
    const range = Uint8Array.from(villianRange.reduce((prev, curr, index) => {
      if (curr) prev.push(index);
      return prev;
    }, []));

    if (!range.length) return alert('Select an opponent range to run simulations.');


    // Get the combos
    const handCombos = Uint8Array.from(range.reduce((total, comboIdx) => {
      total.push(...combos[comboIdx]);
      return total;
    }, []).reduce((total, combo) => {
      total.push(...combo);
      return total;
    },[]));
  });


},false);

  </script>
  </body>
</html>